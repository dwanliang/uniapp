(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-form-form_add"],{"787d":function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return a}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"container999"},[a("v-uni-view",{staticClass:"line"},[a("v-uni-view",{staticClass:"lineLeft"},[t._v("标题")]),a("v-uni-view",{staticClass:"lineRight"},[a("v-uni-input",{staticClass:"input",attrs:{"data-name":"name","placeholder-class":"plaClass",placeholder:"请输入标题"},model:{value:t.form_title,callback:function(e){t.form_title=e},expression:"form_title"}})],1)],1),t.group.length>0?a("v-uni-view",{staticClass:"line"},[a("v-uni-view",{staticClass:"lineLeft"},[t._v("表单范围")]),a("v-uni-view",{staticClass:"lineRight"},[a("v-uni-picker",{attrs:{range:t.submit_type,"range-key":"submit_name"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.submitChange.apply(void 0,arguments)}}},[t._v(t._s(t.submit_type[t.submitIndex].submit_name))])],1)],1):t._e(),t.group.length>0&&0==t.submitIndex?a("v-uni-view",{staticClass:"line"},[a("v-uni-view",{staticClass:"lineLeft"},[t._v("发布到")]),a("v-uni-view",{staticClass:"lineRight"},[a("v-uni-picker",{attrs:{range:t.group,"range-key":"groups_name"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.groupChange.apply(void 0,arguments)}}},[t._v(t._s(t.group[t.groupIndex].groups_name))])],1)],1):t._e(),0==t.group.length&&0==t.submitIndex?a("v-uni-view",{staticClass:"line"},[a("v-uni-view",{staticClass:"lineLeft"},[t._v("发布到")]),a("v-uni-view",{staticClass:"lineRight"},[t._v("你还没有团队"),a("v-uni-text",{staticClass:"blue"},[t._v("去创建团队>>>>>>>>")])],1)],1):t._e(),a("v-uni-view",{staticClass:"line"},[a("v-uni-view",{staticClass:"lineLeft"},[t._v("结束时间")]),a("v-uni-view",{staticClass:"lineRight"},[a("test-com",{attrs:{beginYear:"2021",endYear:"2030"},on:{show:function(e){arguments[0]=e=t.$handleEvent(e),t.show.apply(void 0,arguments)}}})],1)],1),a("v-uni-view",{staticClass:"line",staticStyle:{"flex-wrap":"wrap","border-bottom":"none!important"}},[a("v-uni-view",{staticClass:"lineLeft"},[t._v("表单内容:")])],1),a("v-uni-view",{staticClass:"form_con"},t._l(t.tabs,(function(e,n){return a("v-uni-view",{key:n,staticClass:"line form_line"},[a("v-uni-view",{staticClass:"lineLeft"},[a("v-uni-input",{attrs:{type:"text"},model:{value:e.pro,callback:function(i){t.$set(e,"pro",i)},expression:"tab.pro"}})],1),a("v-uni-view",{staticClass:"lineRight form_Rigth",staticStyle:{position:"relative"}},[a("v-uni-view",{},[1==e.type?a("v-uni-input",{staticClass:"input dan_input",attrs:{"data-name":"name","placeholder-class":"plaClass",placeholder:e.pro},model:{value:e.value,callback:function(i){t.$set(e,"value",i)},expression:"tab.value"}}):t._e(),2==e.type?a("v-uni-textarea",{staticClass:"uni-textarea",attrs:{maxlength:"300",placeholder:e.pro},model:{value:e.value,callback:function(i){t.$set(e,"value",i)},expression:"tab.value"}}):t._e(),3==e.type?a("v-uni-view",{staticClass:"uni-padding-wrap",staticStyle:{"padding-left":"40rpx"}},t._l(e.radio_item.data,(function(s,o,l){return a("v-uni-view",{key:l,staticClass:"radio"},[a("v-uni-view",{staticClass:"deletes",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.deletes(n,l,e.type)}}},[a("v-uni-image",{attrs:{src:i("853a"),mode:""}})],1),a("v-uni-input",{attrs:{type:"text"},model:{value:s.name,callback:function(e){t.$set(s,"name",e)},expression:"items.name"}})],1)})),1):t._e(),4==e.type?a("v-uni-view",{staticClass:"uni-padding-wrap",staticStyle:{"padding-left":"40rpx"}},t._l(e.checkbox_item.data,(function(s,o,l){return a("v-uni-view",{key:l,staticClass:"checkbox"},[a("v-uni-view",{staticClass:"deletes",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.deletes(n,l,e.type)}}},[a("v-uni-image",{attrs:{src:i("853a"),mode:""}})],1),a("v-uni-input",{attrs:{type:"text"},model:{value:s.name,callback:function(e){t.$set(s,"name",e)},expression:"items.name"}})],1)})),1):t._e(),5==e.type?a("AddressPicker",{attrs:{level:3,indexs:n},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.change.apply(void 0,arguments)}}},[t._v(t._s(t.planLocate))]):t._e(),6==e.type?a("test-com",{attrs:{beginYear:"2000",endYear:"2030"},on:{show:function(e){arguments[0]=e=t.$handleEvent(e),t.show.apply(void 0,arguments)}}}):t._e()],1)],1),3==e.type||4==e.type?a("v-uni-view",{staticClass:"radio_add",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.option_add(n,e.type)}}},[a("v-uni-image",{attrs:{src:i("a4d6"),mode:""}})],1):t._e(),a("v-uni-view",{staticClass:"remore",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.remove(n)}}},[a("v-uni-image",{attrs:{src:i("853a"),mode:""}})],1)],1)})),1),a("v-uni-view",{staticClass:"course-add",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.input_add()}}},[a("v-uni-image",{attrs:{src:i("a4d6"),mode:""}})],1),a("v-uni-view",{staticClass:"bottom_com"},[t.id?t._e():a("v-uni-view",{staticClass:"com_con"},[a("v-uni-view",{staticClass:"coll",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submit(2)}}},[t._v("创建模板")]),a("v-uni-view",{staticClass:"over",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submit(1)}}},[t._v("发布")])],1),t.id?a("v-uni-view",{staticClass:"com_con"},[a("v-uni-view",{staticClass:"delet",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submit(4)}}},[t._v("删除")]),a("v-uni-view",{staticClass:"colls",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submit(3)}}},[t._v("保存")]),a("v-uni-view",{staticClass:"over",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submit(1)}}},[t._v("发布")])],1):t._e()],1)],1)},s=[]},"7f0d":function(t,e,i){"use strict";i.r(e);var a=i("787d"),n=i("d764");for(var s in n)"default"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);i("a902");var o,l=i("f0c5"),d=Object(l["a"])(n["default"],a["b"],a["c"],!1,null,"012fb52f",null,!1,a["a"],o);e["default"]=d.exports},"7ff8":function(t,e,i){var a=i("b4d8");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("042f6322",a,!0,{sourceMap:!1,shadowMode:!1})},"853a":function(t,e,i){t.exports=i.p+"static/img/jian.8b67af77.png"},9969:function(t,e,i){"use strict";var a=i("4ea4");i("4160"),i("a434"),i("ac1f"),i("1276"),i("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("9c23")),s=a(i("82bd")),o=getApp().globalData.comm,l={components:{testCom:n.default,AddressPicker:s.default},data:function(){return{id:0,group:[],groupIndex:0,time_end:"",form_title:"",form_con:"",placeholder:"开始输入...",index:0,tabs:[],proName:["单行文本","多行文本","单选框","多选框","地址","时间"],radio_value:2,checkbox_value:2,planLocate:"请选择地址",address_start:!1,submit_type:[{submit_name:"团队",type:"team"},{submit_name:"所有人",type:"all"}],submitIndex:0}},onLoad:function(t){this.id=t.id,this.form_list(t.id)},methods:{form_list:function(t){var e=this;this.$request(o.api.groups_list).then((function(t){200==t.code&&(e.group=t.data)})),t&&(uni.setNavigationBarTitle({title:"表单模板编辑"}),this.$request(o.api.form_template,{template_id:t}).then((function(t){200==t.code&&(e.form_title=t.data.title,e.tabs=t.data.data)})))},change:function(t){var e=this;console.log(JSON.stringify(t.data)),this.planLocate="",t.data.forEach((function(t,i){e.planLocate+=0===i?t.name:"-"+t.name}));this.planLocate.split("-");this.tabs[t.indexs].value=this.planLocate,console.log(this.tabs)},show:function(t){this.time_end=t.selectRes},editOk:function(t){console.log(t)},groupChange:function(t){this.groupIndex=t.detail.value},submitChange:function(t){this.submitIndex=t.detail.value},option_add:function(t,e){if(3==e){var i=this.tabs[t].radio_item.data.length+1;if(i>10)return void o.tan("选项过多!",1e3);this.radio_value++,this.tabs[t].radio_item.data.push({name:"选项"+this.radio_value,value:this.radio_value+""})}else{i=this.tabs[t].checkbox_item.data.length+1;if(i>10)return void o.tan("选项过多!",1e3);this.checkbox_value++,this.tabs[t].checkbox_item.data.push({name:"选项"+this.checkbox_value,value:this.checkbox_value+""})}},get_cont:function(t){this.form_con=t},input_add:function(){var t=this,e=this;uni.showActionSheet({title:"您要添加的表单类型",itemColor:"deepskyblue",itemList:e.proName,success:function(e){t.addInner(e.tapIndex),console.log("选中了第"+(e.tapIndex+1)+"个按钮")},fail:function(t){console.log(t.errMsg)}})},addInner:function(t){this.index+=1;var e={id:this.index,value:"",pro:"".concat(this.proName[t]),type:t+1};if(2==t)Object.assign(e,{radio_item:{data:[{name:"选项1",value:"1"},{name:"选项2",value:"2"}],checked:0}});else if(3==t)Object.assign(e,{checkbox_item:{data:[{name:"选项1",value:"1"},{name:"选项2",value:"2"}]}});else if(4==t){if(this.address_start)return void o.tan("只能添加一个地址组件",1e3);this.address_start=!0}this.tabs.push(e)},remove:function(t){this.tabs.splice(t,1)},deletes:function(t,e,i){if(3==i){var a=this.tabs[t].radio_item.data.length+1;if(a<=2)return void o.tan("最少一个选项!",1e3);this.tabs[t].radio_item.data.splice(e,1)}else{a=this.tabs[t].checkbox_item.data.length+1;if(a<=2)return void o.tan("最少一个选项!",1e3);this.tabs[t].checkbox_item.data.splice(e,1)}console.log(this.tabs)},submit:function(t){var e=this.group[this.groupIndex].id;if(e){var i=this.time_end;if(i<Math.round(new Date/1e3))o.tan("结束时间必须大于当前时间",1e3);else{var a=this.form_title;if(a)if(this.tabs.length<1)o.tan("没有表单!",1e3);else{var n=this.submit_type[this.submitIndex].type,s=JSON.stringify(this.tabs),l="",d={groups_id:e,time_end:i,form_title:a,form_con:s,submit_type:n};if(1==t)l=o.api.form_add;else if(2==t)l=o.api.form_template_add;else{if(3!=t){l=o.api.form_template_delete,Object.assign(d,{template_id:this.id});var r=this;return void uni.showModal({title:"是否删除此模板！",success:function(t){t.confirm&&r.teamplate(l,d)}})}l=o.api.form_template_edit,Object.assign(d,{template_id:this.id})}this.teamplate(l,d)}else o.tan("请填写表单标题",1e3)}}else o.tan("请选择组织",1e3)},teamplate:function(t,e){this.$request(t,e).then((function(t){o.tan(t.msg,1e3),200==t.code&&setTimeout((function(){uni.navigateTo({url:"/pages/form/my_form"})}),1e3)}))}}};e.default=l},a4d6:function(t,e,i){t.exports=i.p+"static/img/jia.b8907e32.png"},a902:function(t,e,i){"use strict";var a=i("7ff8"),n=i.n(a);n.a},b4d8:function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,".dan_input[data-v-012fb52f]{height:2.5em}.form_con .lineLeft[data-v-012fb52f]{width:100%}.radio[data-v-012fb52f],.checkbox[data-v-012fb52f]{float:left;width:100%;padding:%?20?%}.uni-textarea[data-v-012fb52f]{width:100%}.form_con[data-v-012fb52f]{margin-top:%?50?%}.remore[data-v-012fb52f]{position:absolute;right:%?10?%}.remore uni-image[data-v-012fb52f],.deletes uni-image[data-v-012fb52f],.radio_add uni-image[data-v-012fb52f]{width:%?50?%;height:%?50?%;-webkit-border-radius:50%;border-radius:50%}.deletes[data-v-012fb52f]{position:absolute;left:%?10?%}.uni-list-line[data-v-012fb52f]{position:relative;padding:%?20?% %?20?%;border-bottom:%?2?% #999 solid}.uni-list-pro[data-v-012fb52f]{color:#999;font-size:%?30?%}.lineLeft[data-v-012fb52f]{width:%?160?%;\n\t/* float: left; */padding:0 %?20?%;font-size:%?28?%;position:relative;\n\t/* top: 6rpx; */font-weight:800}.lineLeft uni-input[data-v-012fb52f]{font-size:%?30?%}.line[data-v-012fb52f],.form_line[data-v-012fb52f]{border-bottom:%?2?% solid hsla(0,0%,80%,.8);\n\t/* padding: 24rpx 0; */\n\t/* padding-bottom: 20rpx; */margin:%?24?% 0;display:-webkit-box;display:-webkit-flex;display:flex;position:relative}.form_line[data-v-012fb52f]{-webkit-flex-wrap:wrap;flex-wrap:wrap}.form_Rigth[data-v-012fb52f]{padding-left:%?16?%}.lineRight[data-v-012fb52f]{width:100%;font-size:%?30?%}.buttonBox[data-v-012fb52f]{width:80%;background-color:#00bfff;color:#fff;text-align:center;margin:0 auto;padding:%?20?%;-webkit-border-radius:%?36?%;border-radius:%?36?%;\n\t/* position: fixed; */bottom:%?300?%;left:8%}.container[data-v-012fb52f]{padding:0}.ql-container[data-v-012fb52f]{margin:0}.blue[data-v-012fb52f]{color:#00f}.radio_add[data-v-012fb52f]{font-size:%?16?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-border-radius:50%;border-radius:50%;position:absolute;right:%?80?%}.course-add[data-v-012fb52f]{font-size:%?20?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;color:#fff;-webkit-box-align:center;-webkit-align-items:center;align-items:center;width:%?80?%;height:%?80?%;-webkit-border-radius:50%;border-radius:50%;margin:%?30?% auto %?150?% auto}.course-add uni-image[data-v-012fb52f]{width:%?60?%;height:%?60?%;position:relative;right:%?2?%}.bottom_com[data-v-012fb52f]{width:100%;position:fixed;height:%?100?%;bottom:0}.com_con[data-v-012fb52f]{height:%?100?%;display:-webkit-box;display:-webkit-flex;display:flex}.com_con uni-view[data-v-012fb52f]{height:%?100?%;color:#fff;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;cursor:pointer}.coll[data-v-012fb52f]{width:50%;background-color:#66f}.colls[data-v-012fb52f]{width:25%;background-color:#66f}.delet[data-v-012fb52f]{width:25%;background-color:#ff4d4d}.over[data-v-012fb52f]{width:50%;background-color:#00bfff}",""]),t.exports=e},d764:function(t,e,i){"use strict";i.r(e);var a=i("9969"),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e["default"]=n.a}}]);