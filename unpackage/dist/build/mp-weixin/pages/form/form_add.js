(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/form/form_add"],{"0ea3":function(t,e,i){},3093:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=getApp().globalData.comm,n=function(){i.e("components/test_com").then(function(){return resolve(i("9c23"))}.bind(null,i)).catch(i.oe)},o=function(){Promise.all([i.e("common/vendor"),i.e("components/address/AddressPicker")]).then(function(){return resolve(i("82bd"))}.bind(null,i)).catch(i.oe)},s={components:{testCom:n,AddressPicker:o},data:function(){return{id:0,group:[],groupIndex:0,time_end:"",form_title:"",form_con:"",placeholder:"开始输入...",index:0,tabs:[],proName:["单行文本","多行文本","单选框","多选框","地址","时间"],radio_value:2,checkbox_value:2,planLocate:"请选择地址",address_start:!1,submit_type:[{submit_name:"团队",type:"team"},{submit_name:"所有人",type:"all"}],color:["#80ff80","#4dd2ff","#ff80aa","#eb99ff","#ff8080","#b3e0ff","#6666ff"],submitIndex:0,color1:0,color2:0}},onLoad:function(t){this.id=t.id,this.color1=t.color1,this.color2=t.color2,this.form_list(t.id)},methods:{form_list:function(e){var i=this;this.$request(a.api.groups_list).then((function(t){200==t.code&&(i.group=t.data)})),e&&(t.setNavigationBarTitle({title:"表单模板编辑"}),this.$request(a.api.form_template,{template_id:e}).then((function(t){200==t.code&&(i.form_title=t.data.title,i.tabs=t.data.data)})))},change:function(t){var e=this;console.log(JSON.stringify(t.data)),this.planLocate="",t.data.forEach((function(t,i){e.planLocate+=0===i?t.name:"-"+t.name}));this.planLocate.split("-");this.tabs[t.indexs].value=this.planLocate,console.log(this.tabs)},show:function(t){this.time_end=t.selectRes},editOk:function(t){console.log(t)},groupChange:function(t){this.groupIndex=t.detail.value},submitChange:function(t){this.submitIndex=t.detail.value},option_add:function(t,e){if(3==e){var i=this.tabs[t].radio_item.data.length+1;if(i>10)return void a.tan("选项过多!",1e3);this.radio_value++,this.tabs[t].radio_item.data.push({name:"选项"+this.radio_value,value:this.radio_value+""})}else{i=this.tabs[t].checkbox_item.data.length+1;if(i>10)return void a.tan("选项过多!",1e3);this.checkbox_value++,this.tabs[t].checkbox_item.data.push({name:"选项"+this.checkbox_value,value:this.checkbox_value+""})}},get_cont:function(t){this.form_con=t},input_add:function(){var e=this,i=this;t.showActionSheet({title:"您要添加的表单类型",itemColor:"deepskyblue",itemList:i.proName,success:function(t){e.addInner(t.tapIndex),console.log("选中了第"+(t.tapIndex+1)+"个按钮")},fail:function(t){console.log(t.errMsg)}})},addInner:function(t){this.index+=1;var e={id:this.index,value:"",pro:"".concat(this.proName[t]),type:t+1};if(2==t)Object.assign(e,{radio_item:{data:[{name:"选项1",value:"1"},{name:"选项2",value:"2"}],checked:0}});else if(3==t)Object.assign(e,{checkbox_item:{data:[{name:"选项1",value:"1"},{name:"选项2",value:"2"}]}});else if(4==t){if(this.address_start)return void a.tan("只能添加一个地址组件",1e3);this.address_start=!0}this.tabs.push(e)},remove:function(t){this.tabs.splice(t,1)},deletes:function(t,e,i){if(3==i){var n=this.tabs[t].radio_item.data.length+1;if(n<=2)return void a.tan("最少一个选项!",1e3);this.tabs[t].radio_item.data.splice(e,1)}else{n=this.tabs[t].checkbox_item.data.length+1;if(n<=2)return void a.tan("最少一个选项!",1e3);this.tabs[t].checkbox_item.data.splice(e,1)}console.log(this.tabs)},submit:function(e){var i=this.group[this.groupIndex].id;if(i){var n=this.time_end;if(n<Math.round(new Date/1e3))a.tan("结束时间必须大于当前时间",1e3);else{var o=this.form_title;if(o)if(this.tabs.length<1)a.tan("没有表单!",1e3);else{var s=this.submit_type[this.submitIndex].type,c=JSON.stringify(this.tabs),r="",u={groups_id:i,time_end:n,form_title:o,form_con:c,submit_type:s};if(1==e)r=a.api.form_add;else if(2==e)r=a.api.form_template_add;else{if(3!=e){r=a.api.form_template_delete,Object.assign(u,{template_id:this.id});var l=this;return void t.showModal({title:"是否删除此模板！",success:function(t){t.confirm&&l.teamplate(r,u)}})}r=a.api.form_template_edit,Object.assign(u,{template_id:this.id})}this.teamplate(r,u)}else a.tan("请填写表单标题",1e3)}}else a.tan("请选择组织",1e3)},teamplate:function(e,i){this.$request(e,i).then((function(e){a.tan(e.msg,1e3),200==e.code&&setTimeout((function(){t.navigateTo({url:"/pages/form/my_form"})}),1e3)}))}}};e.default=s}).call(this,i("543d")["default"])},"7f0d":function(t,e,i){"use strict";i.r(e);var a=i("c3e6"),n=i("d764");for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("8f7c");var s,c=i("f0c5"),r=Object(c["a"])(n["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],s);e["default"]=r.exports},"8f7c":function(t,e,i){"use strict";var a=i("0ea3"),n=i.n(a);n.a},b2a9:function(t,e,i){"use strict";(function(t){i("93c3");a(i("66fd"));var e=a(i("7f0d"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("543d")["createPage"])},c3e6:function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return a}));var n=function(){var t=this,e=t.$createElement;t._self._c},o=[]},d764:function(t,e,i){"use strict";i.r(e);var a=i("3093"),n=i.n(a);for(var o in a)"default"!==o&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a}},[["b2a9","common/runtime","common/vendor"]]]);